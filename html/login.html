<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Returning User - Login</title>
    <link rel="stylesheet" href="../css/app.css" />
    <script src="../bower_components/modernizr/modernizr.js"></script>
</head>

<body class="text-center">
    <header id="header">
    </header>

    <div class="row">
        <div class="large-6 columns">
            <div class="signup-panel">
                <p class="welcome"> Welcome Back! </p>
                <form>
                    <div class="row collapse">
                        <div class="small-2 columns">
                            <span class="prefix"><i class="fi-mail"></i></span>
                        </div>
                        <div class="small-10  columns">
                            <input class= "email" type="text" placeholder="email">
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-2 columns ">
                            <span class="prefix"><i class="fi-lock"></i></span>
                        </div>
                        <div class="small-10 columns ">
                            <input class="pass" type="password" placeholder="password">
                        </div>
                    </div>
                </form>
                <button class="signin">Sign in! </button>
                <p>Don't have an account? <a href="./signup.html">Sign up here &raquo</a></p>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="row">
            <div class="small-4 columns">

    </footer>

    <div id="layout"></div>

    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/foundation/js/foundation.min.js"></script>
    <script src="../js/app-bundle.js"></script>
    
    <script>
    
        $(".signin").on('click', function(){
            var email = $('input[class=email]').val();
            var password = $('input[class=pass]').val();
            
            if (email === undefined || password === undefined) {
                alert("Please enter your username and password.");
            }
            else {
                $.ajax({method: "POST", url: 'https://exquisite-cadaver-loopback-cathe313.c9.io/api/users/login', data: {'email': email, 'password': password}}).then(
                    function (res){
                        var accessToken = res.id;
                        var userId = res.userId;
                        console.log(accessToken, userId);
                        alert("Welcome back!");
                        window.location.href="app.html";
                    }
                    
                )
                    
            }

          
        });
    </script>
    
</body>

</html>